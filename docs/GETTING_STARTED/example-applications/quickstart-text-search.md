---
title: "Text search (using USE VectorHub)"
excerpt: ""
slug: "quickstart-text-search"
hidden: false

---

<figure>
<img src="https://github.com/RelevanceAI/RelevanceAI-readme-docs/blob/v0.33.2-getting-started/docs_template/GETTING_STARTED/example-applications/_assets/RelevanceAI_text_search.png?raw=true"
     alt="RelevanceAI Text to Image"
     style="width: 100% vertical-align: middle"/>
<figcaption>
<a href="https://tfhub.dev/google/universal-sentence-encoder/4">Universal Sentence Encoder encoding process</a>
</figcaption>

<figure>

In this section, we will show you how to create and experiment with a powerful text search engine using Google's Universal Sentence Encoder through [VectorHub library](https://github.com/RelevanceAI/vectorhub) and Relevance AI.

**Try it out in Colab:** [![Open In Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/RelevanceAI/RelevanceAI-readme-docs/blob/v0.33.2-getting-started/docs/GETTING_STARTED/example-applications/_notebooks/RelevanceAI-ReadMe-Text-Search-using-USE-VectorHub.ipynb)


### What I Need
* Project and API Key: Grab your RelevanceAI project and API key by [signing up](https://cloud.relevance.ai/ )
* Python 3 (ideally a Jupyter Notebook/Colab environment)

### Installation Requirements


```bash Bash
!pip install -U RelevanceAI[notebook]==0.33.2

!pip install -q vectorhub[encoders-text-tfhub]
```
```bash
```



### Setting Up Client

To be able to use Relevance AI, you need to instantiate a client. This needs a Project and API key that can be accessed at [https://cloud.relevance.ai/](https://cloud.relevance.ai/) in the settings area! Alternatively, you can run the code below and follow the link and the guide.


```python Python (SDK)
from relevanceai import Client

"""
You can sign up/login and find your credentials here: https://cloud.relevance.ai/sdk/api
Once you have signed up, click on the value under `Authorization token` and paste it here
"""
client = Client()

```
```python
```


## Text Search with Universal Sentence Encoder using VectorHub


### 1. Data

For this experiment, we use our sample e-commerce dataset and preview one of the documents.


```python Python (SDK)
import pandas as pd
from relevanceai.datasets import get_ecommerce_dataset_clean

# Retrieve our sample dataset. - This comes in the form of a list of documents.
documents = get_ecommerce_dataset_clean()

pd.DataFrame.from_dict(documents).head()
```
```python
```

An example document should have a structure that looks like this.


```json JSON
{'_id': '711160239',
  'product_image': 'https://thumbs4.ebaystatic.com/d/l225/pict/321567405391_1.jpg',
  'product_link': 'https://www.ebay.com/itm/20-36-Mens-Silver-Stainless-Steel-Braided-Wheat-Chain-Necklace-Jewelry-3-4-5-6MM-/321567405391?pt=LH_DefaultDomain_0&var=&hash=item4adee9354f',
  'product_price': '$7.99 to $12.99',
  'product_title': '20-36Mens Silver Stainless Steel Braided Wheat Chain Necklace Jewelry 3/4/5/6MM"',
  'query': 'steel necklace',
  'source': 'eBay'
}
```
```json
```

### 2. Encode

Next, we will instantiate the universal sentence encoder from VectorHub and encode the `product_title` field among all documents.


```python Python (SDK)
from vectorhub.encoders.text.tfhub import USE2Vec
model = USE2Vec()

documents = model.encode_documents(fields=['product_title'], documents=documents)

```
```python
```


We can see that there is now a field called `product_title_use_vector_` in our data.
`_use_vector_` is the name assigned to the model in Vectorhub and we use it when generating vectors.
If you prefer a different name, simply modify the `__name__` attribute via


```python Python (SDK)

enc.__name__ = "model_name_goes_here"
```
```python
```

### 3. Insert

The data can be easily uploaded to Relevance AI platform via `insert_documents`.


```python Python (SDK)
DATASET_ID = "quickstart-example"
df = client.Dataset(DATASET_ID)
df.delete()
df.insert_documents(documents)
```
```python
```

### 3. Search

Note that our dataset includes vectors generated by Universal Sentence Encoder. Therefore, in this step, we first vectorize the query using the same encoder to be able to search among the similarly generated vectors.


```python Python (SDK)
query = 'Gift for my son'
query_vector = model.encode(query)
```
```python
```


Simple vector search against our dataset:

```python Python (SDK)
multivector_query=[
        { "vector": query_vector, "fields": ["product_title_use_vector_"]}
    ]

results = df.vector_search(
    multivector_query=multivector_query,
    page_size=5
)
```
```python
```


We can see the results on the dashboard via the provided link after the search finishes. Or using Relevance AI `json_shower` as shown below:

```python Python (SDK)
from relevanceai import show_json

print('=== QUERY === ')
print(query)

print('=== RESULTS ===')
show_json(results, image_fields=["product_image"], text_fields=["product_title"])
```
```python
```



<figure>
<img src="https://github.com/RelevanceAI/RelevanceAI-readme-docs/blob/v0.33.2-getting-started/docs_template/GETTING_STARTED/example-applications/_assets/RelevanceAI_text_search_results.png?raw=true"
     alt="Text Search Results"
     style="width: 100% vertical-align: middle"/>
<figcaption>Text Search Results</figcaption>

<figure>

This is just a quick and basic example of using Relevance AI for text search, there are many other search features such as faceted vector search, hybrid search, chunk search, multivector search. For further information please visit [Better text search](doc:better-text-search).


[![Open In Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/RelevanceAI/RelevanceAI-readme-docs/blob/v0.33.2-getting-started/docs/GETTING_STARTED/example-applications/_notebooks/RelevanceAI-ReadMe-Text-Search-using-USE-VectorHub.ipynb)



## Final Code

```python Python (SDK)
from relevanceai import Client

"""
You can sign up/login and find your credentials here: https://cloud.relevance.ai/sdk/api
Once you have signed up, click on the value under `Authorization token` and paste it here
"""
client = Client()


import pandas as pd
from relevanceai.datasets import get_ecommerce_dataset_clean

# Retrieve our sample dataset. - This comes in the form of a list of documents.
documents = get_ecommerce_dataset_clean()

pd.DataFrame.from_dict(documents).head()

from vectorhub.encoders.text.tfhub import USE2Vec
model = USE2Vec()

documents = model.encode_documents(fields=['product_title'], documents=documents)


DATASET_ID = "quickstart-example"
df = client.Dataset(DATASET_ID)
df.delete()
df.insert_documents(documents)

query = 'Gift for my son'
query_vector = model.encode(query)

multivector_query=[
        { "vector": query_vector, "fields": ["product_title_use_vector_"]}
    ]

results = df.vector_search(
    multivector_query=multivector_query,
    page_size=5
)

from relevanceai import show_json

print('=== QUERY === ')
print('Gift for my son')

print('=== RESULTS ===')
show_json(results, image_fields=["product_image"], text_fields=["product_title"])
```
```python
```

